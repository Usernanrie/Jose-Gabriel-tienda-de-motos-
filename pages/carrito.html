<!doctype html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Carrito ‚Ä¢ YVLEM</title>
<link rel="stylesheet" href="../css/colores.css">
<link rel="stylesheet" href="../css/styleInicio.css">
<style>
    body { background:#f9f4ef; padding:20px; }
    h1 { text-align:center; margin-bottom:20px; color:#704214; }
    .carrito-grid { display:grid; gap:15px; max-width:800px; margin:0 auto; }
    .item { display:flex; gap:10px; background:white; padding:10px; border-radius:12px; align-items:center; }
    .item img { width:80px; height:80px; object-fit:cover; border-radius:8px; }
    .item-details { flex:1; }
    .item-details h3 { margin:0; color:#6b4e16; }
    .item-details p { margin:3px 0; font-size:14px; color:#8a7b6a; }
    .item-actions { display:flex; flex-direction:column; gap:5px; }
    .item-actions input { width:50px; padding:3px; border-radius:5px; border:1px solid #ccc; text-align:center; }
    .btn { padding:5px 10px; border:none; border-radius:6px; cursor:pointer; }
    .btn-delete { background:#c0392b; color:white; }
    .btn-checkout { background:#27ae60; color:white; padding:10px 15px; margin-top:15px; display:block; width:100%; max-width:300px; text-align:center; border-radius:10px; }
    .total { text-align:right; margin-top:10px; font-weight:bold; font-size:18px; }
</style>
</head>
<body>

<h1>üõí Carrito de Compras</h1>
<div class="carrito-grid" id="cartGrid"></div>
<div class="total" id="cartTotal">Total: Bs 0</div>
<button class="btn btn-checkout" id="checkoutBtn">Finalizar Compra</button>
<button class="btn btn-primary" onclick="location.href='tienda.html'">‚Üê Volver a la Tienda</button>

<script>
// Funciones de carrito (compatibles con tienda)
function getCart(){ return JSON.parse(localStorage.getItem('cart')||'[]'); }
function saveCart(cart){ localStorage.setItem('cart', JSON.stringify(cart)); }
function updateCart(){ renderCart(); }

function renderCart(){
    const grid=document.getElementById('cartGrid');
    const cart=getCart();
    grid.innerHTML='';
    let total=0;
    if(cart.length===0){ grid.innerHTML='<p class="muted">No hay productos en el carrito.</p>'; document.getElementById('cartTotal').textContent='Total: Bs 0'; return; }
    cart.forEach((p,i)=>{
        total+=p.price*p.qty;
        const div=document.createElement('div'); div.className='item';
        div.innerHTML=`
            <img src="../imagenes/${p.img}" alt="${p.title}">
            <div class="item-details">
                <h3>${p.title}</h3>
                <p>Bs ${p.price} x <input type="number" min="1" value="${p.qty}" data-index="${i}" class="qtyInput"></p>
            </div>
            <div class="item-actions">
                <button class="btn btn-delete" data-index="${i}">Eliminar</button>
            </div>
        `;
        grid.appendChild(div);
    });
    document.getElementById('cartTotal').textContent='Total: Bs '+total.toFixed(2);

    // Eventos
    document.querySelectorAll('.btn-delete').forEach(b=>{
        b.addEventListener('click',()=>{
            const idx=b.dataset.index;
            cart.splice(idx,1);
            saveCart(cart);
            updateCart();
        });
    });
    document.querySelectorAll('.qtyInput').forEach(input=>{
        input.addEventListener('change',()=>{
            const idx=input.dataset.index;
            let val=parseInt(input.value,10);
            if(val<1) val=1;
            cart[idx].qty=val;
            saveCart(cart);
            updateCart();
        });
    });
}

// Checkout simulado
document.getElementById('checkoutBtn').addEventListener('click',()=>{
    const cart=getCart();
    if(cart.length===0){ alert('El carrito est√° vac√≠o'); return; }
    let total=cart.reduce((a,b)=>a+b.price*b.qty,0);
    alert(`Compra simulada\nTotal: Bs ${total.toFixed(2)}\nGracias por su compra`);
    saveCart([]);
    updateCart();
});

// Inicial
updateCart();
</script>
</body>
</html>
